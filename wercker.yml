installOSB:
  box:
      id: oraclelinux:7-slim
      ports:
        - 8080
        
  steps:
  - shellcheck
  
  - bash-template
  
  - script:
      name: "Check linux version"
      code: cat /etc/os-release
  
  - script:
      name: "Visualise directory"
      code: ls -al
      
 # - script:
 #     name: helm install
 #     code: |
 #       mkdir -p helm
  #      curl https://storage.googleapis.com/kubernetes-helm/helm-v2.10.0-linux-amd64.tar.gz  | tar zxv -C helm
  #      mv helm/linux-amd64/helm /usr/local/bin/helm
   #     helm version --client
      
  #- script:
  #    name: "Add the Kubernetes Service Catalog helm repository"
  #    code: helm repo add svc-cat https://svc-catalog-charts.storage.googleapis.com
      
  - stephanemo/helm:
      token: $TOKEN
      username: $USERNAME
      server: $SERVER
      certificate-authority: $CERTIFICATE_AUTHORITY
      cluster-name: $CLUSTER_NAME
      context-name: $CONTEXT_NAME
      release-namespace: $NAMESPACE
      release-name: catalog
      repo: svc-cat
      chart-name: catalog
      
 # - script:
 #     name: "Install the Kubernetes Service Catalog helm chart"
 #     code: |
 #       cat $CONFIG
 #       echo mdir .kube
 #       mkdir .kube
 #       echo copy config
 #       cat $CONFIG > ~/.kube/config
 #       cat ~/.kube/config
 #       helm install svc-cat/catalog --namespace stm --timeout 300 --name catalog
      
 # - script:
 #     name: "Install svcat tool"
 #    code: |
 #       curl -sLO https://download.svcat.sh/cli/latest/linux/amd64/svcat
 #       chmod +x ./svcat
 #       mv ./svcat /usr/local/bin/
 #       svcat version --client
        
